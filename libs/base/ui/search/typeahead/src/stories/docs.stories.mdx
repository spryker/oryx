import { Story, Meta, Canvas, ArgsTable } from '@storybook/addon-docs';
import { html, TemplateResult } from 'lit';
import { storybookPrefix } from '../../../../.constants';

<Meta title={`${storybookPrefix}/Search/Typeahead/Docs`} />

## Toggle popover

Toggling of the popover is mainly an internal matter of the typeahead component and there's no public javascript API to control this behaviour. The visibility of the popover can however be controlled by a CSS custom property:

```html
<oryx-typeahead style="--oryx-popover-visible: 1;">
  <input value="value is required to show options" />
  <oryx-option slot="option">first</oryx-option>
  <oryx-option slot="option" selected>second</oryx-option>
  <oryx-option slot="option">3rd</oryx-option>
</oryx-typeahead>
```

## Popover direction

The popover direction (up/down) defaults to downwards. However, if the popover doesn't fit vertically, it will go upwards. This is controlled in CSS based on the `up` attribute.

## Events

There are a couple of events useful in the context of the typeahead component.

1. The `oryx.typeahead` is dispatched on every _input_
2. The `oryx.search` is dispatched when the user hits the enter key or clicks the search button, see the [search component](?path=/docs/search--search).
3. The `oryx.select` is dispatched when an item is selected from the list of items, see the [popover component](?path=/docs/utilities--popover).

### `oryx.typeahead` event

The `oryx.typeahead` is dispatched on every _input_. You can use the native input event, the `oryx.typeahead` event will however give you direct access to the input value (using `detail.query`).

```html
<oryx-search @oryx.typeahead="${typeahead}"></oryx-search>
<script>
  const typeahead = (e: CustomEvent<SearchPayload>): void => {
    // use e.detail.query to get the typeahead value
  };
</script>
```
