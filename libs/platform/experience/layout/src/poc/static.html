<!-- 
  API

  - `--columns` – for custom grid size, overrides the system grid size
  - `--child-columns` – the number of child columns inside the carousel. This is needed to 
                    properly compute the grid size for each item. When items use col-span, 
                    we should double the item count per span.
  - `--scroll-start` 
 -->
<style>
  body {
    /* background-color: black; */
    /* color: gray; */
    padding: 0;
    margin: 0;
  }

  oryx-layout {
    background-color: lightblue;
  }

  oryx-layout > * {
    border: solid 1px white;
  }

  /* oryx-layout:not([only]),
    h5:has(+ oryx-layout:not([only])),
    h3:has(+ oryx-layout:not([only])) {
      display: none !important;
    } */

  :root {
    --oryx-container-width: 1000px;
    --oryx-container-bleed: 20px;
    --oryx-grid-columns: 12;
    --oryx-grid-column-gap: 20px;
    --oryx-grid-row-gap: 5px;
    --oryx-grid-grid-items: 4;
    --oryx-grid-carousel-items: 4;
    --oryx-grid-text-items: 2;
  }
</style>

<style>
  /* container / bleed */
  oryx-layout[full-bleed] {
    --__bleed: calc((100vw - var(--__width)) / 2);
  }
  oryx-layout[full-bleed='both'] {
    padding-inline-start: var(--__bleed);
    max-width: initial;
  }
  oryx-layout[full-bleed='end'] {
    margin-inline: var(--__bleed) 0;
    padding-inline-end: var(--__bleed);
  }
  /* END container / bleed */

  /* Sticky: TODO */

  oryx-layout {
    --__width: min(
      calc(100vw - (2 * var(--oryx-container-bleed))),
      var(--oryx-container-width)
    );
    --__size: var(--columns, var(--__column-size, var(--oryx-grid-columns)));
    --__factor: calc(var(--oryx-grid-columns) / var(--__size));

    position: relative;
    max-width: min(100vw, var(--__width));
    display: grid;
    gap: var(--oryx-grid-row-gap) var(--oryx-grid-column-gap);
    align-items: var(--align-items, start);
    margin-inline: auto;
    grid-template-columns: repeat(
      var(--__child-columns, var(--__size)),
      calc(
        (var(--__width) / (var(--oryx-grid-columns) / var(--__factor))) -
          (
            var(--oryx-grid-column-gap) -
              (var(--oryx-grid-column-gap) / var(--__size))
          )
      )
    );
  }

  oryx-layout > * {
    box-sizing: border-box;
    --span: 1;
    grid-column: span min(var(--span), var(--__child-columns, var(--__size)));
  }

  [layout='grid'] {
    --__column-size: var(--oryx-grid-grid-items, 4);
  }

  [layout='list'] {
    --oryx-grid-columns: 1;
  }

  /* carousel */
  [layout='carousel'] {
    --__child-columns: var(--child-columns, 24);
    --__column-size: var(--oryx-grid-carousel-items, 4);
  }

  :is([layout='carousel'], [layout-sm='carousel'], [layout-md='carousel'], [layout-lg='carousel']) {
    overscroll-behavior-x: contain;
    scroll-snap-type: both mandatory;
    scroll-behavior: smooth;
    scroll-padding-inline-start: var(--scroll-start, 0px);
    overflow: auto hidden;
  }

  :is([layout='carousel'], [layout-sm='carousel'], [layout-md='carousel'], [layout-lg='carousel'])::-webkit-scrollbar {
    display: none;
  }

  :is([layout='carousel'], [layout-sm='carousel'], [layout-md='carousel'], [layout-lg='carousel'])
    > * {
    scroll-snap-align: start;
  }

  /* text layout */
  oryx-layout[layout='text'] {
    display: block;
    --__column-size: var(--oryx-grid-text-items, 2);
    column-count: var(--__size, 1);
  }
  [layout='text'] :is([layout='grid'], [layout='carousel']) {
    --span: calc(var(--__column-size) / var(--oryx-grid-text-items, 2));
  }
  [layout='text'] :first-child {
    margin-top: 0px;
  }
  /* END text layout */

  /* oryx-layout :is(oryx-layout[layout="carousel"], oryx-layout[layout="grid"]) { */
  oryx-layout oryx-layout {
    --__child-columns: var(--span);
  }

  oryx-layout[layout='split-column(25/75)'] oryx-layout[layout='grid'] {
    --__child-columns: calc(var(--span) / var(--__factor));
  }

  [layout='two-column'] {
    --_first: 8;
  }

  [layout='split-column(25/75)'] > :nth-child(odd) {
    --span: calc(var(--oryx-grid-columns) / 4);
  }

  [layout='split-column(25/75)'] > :nth-child(even) {
    --span: calc(var(--oryx-grid-columns) / 4 * 3);
  }

  [layout='split-column(66/33)'] > :nth-child(odd) {
    --span: calc(var(--oryx-grid-columns) / 3 * 2);
  }

  [layout='split-column(66/33)'] > :nth-child(even) {
    --span: calc(var(--oryx-grid-columns) / 3);
  }

  oryx-layout:not([layout*='column']) oryx-layout[layout='text'] {
    column-count: var(--span, var(--__size, 1));
  }
</style>

<style>
  @media (max-width: 500px) {
    oryx-layout[layout-sm='carousel'] {
      --__child-columns: var(--child-columns, 24);
      --__column-size: var(--oryx-grid-carousel-items, 4);
    }

    oryx-layout[layout-sm='list'] {
      --oryx-grid-columns: 1;
    }
  }

  @media (min-width: 501px) and (max-width: 800px) {
    oryx-layout[layout-md='carousel'] {
      --__child-columns: var(--child-columns, 24);
      --__column-size: var(--oryx-grid-carousel-items, 4);
    }
    oryx-layout[layout-md='list'] {
      --oryx-grid-columns: 1;
    }
  }

  @media (min-width: 801px) {
    oryx-layout[layout-lg='carousel'] {
      --__child-columns: var(--child-columns, 24);
      --__column-size: var(--oryx-grid-carousel-items, 4);
    }
    oryx-layout[layout-lg='list'] {
      --oryx-grid-columns: 1;
    }
  }

  oryx-layout:not([layout]) {
    display: flex;
    flex-wrap: wrap;
    align-items: var(--align-items, start);
  }

  oryx-layout:not([layout]) * {
    flex: 0 0 auto;
  }
</style>

<h3>Flex</h3>

<oryx-layout>
  <span>1</span>
  <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
  <span>3</span>
  <span style="height: 100px; align-self: center">4</span>
  <span>5</span>
  <span>6</span>
</oryx-layout>

<h3>List</h3>

<oryx-layout layout="list">
  <span>1</span>
  <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
  <span>3</span>
  <span style="height: 100px; align-self: center">4</span>
  <span>5</span>
  <span>6</span>
</oryx-layout>

<h3>Responsive</h3>

<h5>grid on large screen, carousel on small screen</h5>
<oryx-layout
  layout-lg="grid"
  layout-md="list"
  layout-sm="carousel"
  style="--child-columns: 6"
>
  <span>1</span>
  <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
  <span>3</span>
  <span style="height: 100px; align-self: center">4</span>
  <span>5</span>
  <span>6</span>
</oryx-layout>

<h3>Column</h3>

<h5>12-columns</h5>
<oryx-layout layout="column">
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>4</span>
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>4</span>
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>12</span>
</oryx-layout>

<h5>Flexible width</h5>
<oryx-layout style="--oryx-container-width: 400px; height: 100px">
  <span>Login </span>
</oryx-layout>

<h3>Grid</h3>

<h5>Grid</h5>
<oryx-layout layout="grid">
  <span>1</span>
  <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
  <span>3</span>
  <span style="height: 100px; align-self: center">4</span>
  <span>5</span>
  <span>6</span>
</oryx-layout>

<h5>Grid, full-bleed="both"</h5>
<oryx-layout layout="grid" full-bleed="both">
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>4</span>
</oryx-layout>

<h5>Grid, with column span</h5>
<oryx-layout layout="grid">
  <span>1</span>
  <span style="--span: 2">2</span>
  <span>3</span>
  <span>4</span>
  <span>5</span>
  <span>6</span>
</oryx-layout>

<h5>Grid, with inner grid (with inner carousel)</h5>
<oryx-layout layout="grid">
  <span>1</span>
  <span style="--span: 2">
    <oryx-layout layout="grid">
      <span>1 (1st level nested item)</span>
      <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
      <span>6</span>
      <span style="--span: 2">
        <oryx-layout layout="carousel" style="--child-columns: 12">
          <span>1 (2nd level nested item)</span>
          <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
          <span>3</span>
          <span>4</span>
          <span>1</span>
          <span>2</span>
          <span>3</span>
          <span>4</span>
          <span>1</span>
          <span>2</span>
          <span>3</span>
          <span>12</span>
        </oryx-layout>
      </span>
      <span>8</span>
      <span>9</span>
    </oryx-layout>
  </span>
  <span>3</span>
  <span>4</span>
  <span>5</span>
  <span>6</span>
</oryx-layout>

<h5>Grid, with custom column size (3)</h5>
<oryx-layout layout="grid" style="--columns: 3">
  <span>1</span>
  <span style="--span: 2">2</span>
  <span>3</span>
  <span>4</span>
  <span>5</span>
</oryx-layout>

<h5>Grid, with custom column size (7)</h5>
<oryx-layout layout="grid" style="--columns: 6">
  <span>1</span>
  <span style="--span: 2">2</span>
  <span>3</span>
  <span>4</span>
  <span>5</span>
</oryx-layout>

<h5>Grid, with nested text</h5>
<p>The text column size is inherited from the parent column span</p>
<oryx-layout layout="grid">
  <span>1</span>
  <span style="--span: 2">
    <oryx-layout layout="text">
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        <mark>Laboro autem non sine causa;</mark> Nos paucis ad haec additis
        finem faciamus aliquando; Duo Reges: constructio interrete.
        <a href="http://loripsum.net/" target="_blank"
          >Quare attende, quaeso.</a
        >
        Conferam avum tuum Drusum cum C. Si longus, levis dictata sunt.
      </p>
    </oryx-layout>
  </span>
  <span>3</span>
  <span>4</span>
  <span>5</span>
  <span>6</span>
</oryx-layout>

<h3>Carousel</h3>
<h5>Carousel, full-bleed="end"</h5>
<oryx-layout layout="carousel" style="--child-columns: 12" full-bleed="end">
  <span>1</span>
  <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
  <span>3</span>
  <span>4</span>
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>4</span>
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>12</span>
</oryx-layout>

<h5>Carousel, no bleed, some inner col-span</h5>
<oryx-layout layout="carousel" style="--child-columns: 9">
  <span>1</span>
  <span style="--span: 2">2</span>
  <span>3</span>
  <span>4</span>
  <span>5</span>
  <span>6</span>
  <span>7</span>
  <span>8</span>
</oryx-layout>

<h3>Split column</h3>
<h5>split-column(66/33)</h5>
<oryx-layout layout="split-column(66/33)">
  <span>1</span>
  <span>2</span>
  <span>
    <oryx-layout layout="carousel" style="--child-columns: 9">
      <span>1</span>
      <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
      <span>6</span>
      <span>7</span>
      <span>8</span>
      <span>9</span>
    </oryx-layout>
  </span>
  <span>4</span>
</oryx-layout>

<h5>split-column(25/75)</h5>
<oryx-layout layout="split-column(25/75)">
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>
    <oryx-layout layout="grid">
      <span>1</span>
      <span>2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
      <span>6</span>
      <span>7</span>
      <span>8</span>
      <span>9</span>
    </oryx-layout></span
  >
</oryx-layout>

<h5>split-column(25/75)</h5>
<oryx-layout layout="split-column(25/75)">
  <span>1</span>
  <span>2</span>
  <span>3</span>
  <span>
    <oryx-layout layout="carousel" style="--child-columns: 9">
      <span>1</span>
      <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
      <span>6</span>
      <span>7</span>
      <span>8</span>
      <span>9</span>
    </oryx-layout></span
  >
</oryx-layout>

<h3>Text</h3>

<oryx-layout layout="text">
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    <mark>Laboro autem non sine causa;</mark> Nos paucis ad haec additis finem
    faciamus aliquando; Duo Reges: constructio interrete.
    <a href="http://loripsum.net/" target="_blank">Quare attende, quaeso.</a>
    Conferam avum tuum Drusum cum C. Si longus, levis dictata sunt.
  </p>

  <oryx-layout layout="carousel" style="--child-columns: 9">
    <span>1</span>
    <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
    <span>3</span>
    <span>4</span>
    <span>5</span>
    <span>6</span>
    <span>7</span>
    <span>8</span>
    <span>9</span>
  </oryx-layout>
  <p>
    Eadem nunc mea adversum te oratio est. Qui non moveatur et offensione
    turpitudinis et comprobatione honestatis? Atqui haec patefactio quasi rerum
    opertarum, cum quid quidque sit aperitur, definitio est. Est enim effectrix
    multarum et magnarum voluptatum.
    <a href="http://loripsum.net/" target="_blank">Si longus, levis.</a>
    Quid autem habent admirationis, cum prope accesseris? Piso igitur hoc modo,
    vir optimus tuique, ut scis, amantissimus.
    <i>Dicimus aliquem hilare vivere;</i>
  </p>

  <p>
    In qua si nihil est praeter rationem, sit in una virtute finis bonorum; Sed
    venio ad inconstantiae crimen, ne saepius dicas me aberrare; Hoc loco tenere
    se Triarius non potuit. Si enim ita est, vide ne facinus facias, cum mori
    suadeas. At negat Epicurus-hoc enim vestrum lumen estquemquam, qui honeste
    non vivat, iucunde posse vivere.
    <b>Contineo me ab exemplis.</b> Minime vero, inquit ille, consentit.
    Progredientibus autem aetatibus sensim tardeve potius quasi nosmet ipsos
    cognoscimus.
  </p>

  <oryx-layout layout="grid">
    <span>1</span>
    <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
    <span>3</span>
    <span>4</span>
    <span>5</span>
    <span>6</span>
    <span>7</span>
    <span>8</span>
    <span>9</span>
  </oryx-layout>
</oryx-layout>

<h5>split-column(66/33)</h5>
<oryx-layout layout="split-column(66/33)">
  <span>1</span>
  <span>2</span>
  <span>
    <oryx-layout layout="text">
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        <mark>Laboro autem non sine causa;</mark> Nos paucis ad haec additis
        finem faciamus aliquando; Duo Reges: constructio interrete.
        <a href="http://loripsum.net/" target="_blank"
          >Quare attende, quaeso.</a
        >
        Conferam avum tuum Drusum cum C. Si longus, levis dictata sunt.
      </p>

      <oryx-layout layout="carousel" style="--child-columns: 9">
        <span>1</span>
        <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
        <span>3</span>
        <span>4</span>
        <span>5</span>
        <span>6</span>
        <span>7</span>
        <span>8</span>
        <span>9</span>
      </oryx-layout>
      <p>
        Eadem nunc mea adversum te oratio est. Qui non moveatur et offensione
        turpitudinis et comprobatione honestatis? Atqui haec patefactio quasi
        rerum opertarum, cum quid quidque sit aperitur, definitio est. Est enim
        effectrix multarum et magnarum voluptatum.
        <a href="http://loripsum.net/" target="_blank">Si longus, levis.</a>
        Quid autem habent admirationis, cum prope accesseris? Piso igitur hoc
        modo, vir optimus tuique, ut scis, amantissimus.
        <i>Dicimus aliquem hilare vivere;</i>
      </p>

      <p>
        In qua si nihil est praeter rationem, sit in una virtute finis bonorum;
        Sed venio ad inconstantiae crimen, ne saepius dicas me aberrare; Hoc
        loco tenere se Triarius non potuit. Si enim ita est, vide ne facinus
        facias, cum mori suadeas. At negat Epicurus-hoc enim vestrum lumen
        estquemquam, qui honeste non vivat, iucunde posse vivere.
        <b>Contineo me ab exemplis.</b> Minime vero, inquit ille, consentit.
        Progredientibus autem aetatibus sensim tardeve potius quasi nosmet ipsos
        cognoscimus.
      </p>

      <oryx-layout layout="grid">
        <span>1</span>
        <span style="padding: 20px; margin: 10px; border-width: 10px">2</span>
        <span>3</span>
        <span>4</span>
        <span>5</span>
        <span>6</span>
        <span>7</span>
        <span>8</span>
        <span>9</span>
      </oryx-layout>
    </oryx-layout>
  </span>
  <span>4</span>
</oryx-layout>
